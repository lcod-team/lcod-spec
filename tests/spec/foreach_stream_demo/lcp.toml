schemaVersion = "2.0"
id = "lcod://tests/foreach_stream_demo@0.1.0"
version = "0.1.0"
kind = "function"
summary = "Validate the foreach_stream_demo compose using tooling/test_checker."

[deps]
requires = [
  "lcod://tooling/test_checker@1",
  "lcod://flow/foreach@1",
  "lcod://flow/if@1",
  "lcod://flow/break@1",
  "lcod://contract/core/stream/read@1",
  "lcod://contract/core/stream/close@1",
  "lcod://impl/echo@1"
]

[tool]
name = "foreach_stream_demo"
description = "Asserts that foreach_stream_demo consumes the provided stream chunks"
inputSchema = "schema/foreach_stream_demo.in.json"
outputSchema = "schema/foreach_stream_demo.out.json"

[documentation]
body = """
Runs the `examples/flow/foreach_stream_demo` compose via
`tooling/test_checker@1`. The test injects a synthetic UTF-8 stream emitting the
chunks `"12"`, `"34"`, and `"56"` and expects the loop to collect these values
before closing the handle."""
