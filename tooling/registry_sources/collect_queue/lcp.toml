schemaVersion = "1.0"
id = "lcod://tooling/registry_sources/collect_queue@0.1.0"
name = "collect_queue"
namespace = "tooling/registry_sources"
version = "0.1.0"
kind = "component"

summary = "Traverse the catalogue pointer queue breadth-first and emit inline contributions."

[[io.input]]
name = "queue"
type = "array"
description = "Normalized pointers waiting to be processed."

[[io.input]]
name = "downloadsRoot"
type = "string"
description = "Directory used for downloaded catalogues."

[[io.input]]
name = "sourcesBaseDir"
type = "string"
description = "Root directory for relative catalogue pointers."

[[io.input]]
name = "defaultEntrypoint"
type = "object"
description = "Entrypoint defaults inherited by child pointers."

[[io.input]]
name = "basePriority"
type = "any"
description = "Base priority that should be forwarded to pointer helpers."

[[io.output]]
name = "contributions"
type = "array"
description = "Inline contributions collected from processed catalogues."

[[io.output]]
name = "warnings"
type = "array"
description = "Warnings collected while processing the queue."

[deps]
requires = [
  "lcod://flow/foreach@1",
  "lcod://flow/if@1",
  "lcod://flow/while@1",
  "lcod://impl/set@1",
  "lcod://tooling/array/append@0.1.0",
  "lcod://tooling/array/length@0.1.0",
  "lcod://tooling/array/shift@0.1.0",
  "lcod://tooling/value/default_array@0.1.0",
  "lcod://tooling/value/default_object@0.1.0",
  "lcod://tooling/value/is_object@0.1.0",
  "lcod://tooling/value/is_string_nonempty@0.1.0",
  "lcod://tooling/registry_sources/build_inline_entry@0.1.0",
  "lcod://tooling/registry_sources/normalize_pointer@0.1.0",
  "lcod://tooling/registry_sources/partition_normalized@0.1.0",
  "lcod://tooling/registry_sources/process_pointer@0.1.0",
  "lcod://tooling/script@1"
]
