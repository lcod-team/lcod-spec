compose:
  - call: lcod://tooling/script@1
    in:
      input: "__lcod_state__"
      source: |
        async ({ state }) => {
          const root = state && typeof state === 'object' ? state : {};
          const rawInput = root.__lcod_input__ ?? null;
          const declared = root.expect ?? null;
          const value = root.value && typeof root.value === 'object' ? root.value.expect ?? null : null;
          return {
            rawInput,
            declaredExpect: declared,
            valueExpect: value
          };
        }
    out:
      rawInput: rawInput
      declaredExpect: declaredExpect
      valueExpect: valueExpect
  - call: lcod://impl/set@1
    in:
      result:
        rawInput: $.rawInput
        declaredExpect: $.declaredExpect
        valueExpect: $.valueExpect
    out:
      result: result
